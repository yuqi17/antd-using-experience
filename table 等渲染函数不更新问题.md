
对于一些组件,比如表格的表头里面会有 render 函数,如果表头是在组件第一次渲染的函数中设置的, 那么这个时候,函数默认捕获的状态参数有可能是默认值,而不是经过查询,设置后的最新值;
对于这种情况,如果依赖的状态(理论上所有一次性的数据)是一次性查询过来,就不再变化了,最好是用ref 或 类组件的this 全局存起来比较好. 因为如果用设置 state 的方式,这个过程是通常
是异步的, 渲染函数捕获不到最新的值就已经渲染了.

处理这种情况可以:
1. 用ref
2. 类组件可以用setState 的回调函数中设置 有依赖的组件
3. 如果依赖的数据不是一次性的,类组件可以用方法2, 而函数式组件可以另外写一个 useEffect 来监听变化后的表头进行设置
